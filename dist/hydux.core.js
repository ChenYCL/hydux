!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.core=t():(n.hydux=n.hydux||{},n.hydux.core=t())}("undefined"!=typeof self?self:this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e={};return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=14)}([function(n,t,e){"use strict";function r(n,t){function e(){this.constructor=n}_(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}function o(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)t.indexOf(r[o])<0&&(e[r[o]]=n[r[o]]);return e}function u(n,t,e,r){var o,u=arguments.length,i=u<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(i=(u<3?o(i):u>3?o(t,e,i):o(t,e))||i);return u>3&&i&&Object.defineProperty(t,e,i),i}function i(n,t){return function(e,r){t(e,r,n)}}function c(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)}function a(n,t,e,r){return new(e||(e=Promise))(function(o,u){function i(n){try{a(r.next(n))}catch(n){u(n)}}function c(n){try{a(r.throw(n))}catch(n){u(n)}}function a(n){n.done?o(n.value):new e(function(t){t(n.value)}).then(i,c)}a((r=r.apply(n,t||[])).next())})}function f(n,t){function e(n){return function(t){return r([n,t])}}function r(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,u&&(i=u[2&e[0]?"return":e[0]?"throw":"next"])&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[0,i.value]),e[0]){case 0:case 1:i=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,u=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){a.label=e[1];break}if(6===e[0]&&a.label<i[1]){a.label=i[1],i=e;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(e);break}i[2]&&a.ops.pop(),a.trys.pop();continue}e=t.call(n,a)}catch(n){e=[6,n],u=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var o,u,i,c,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c}function l(n,t){for(var e in n)t.hasOwnProperty(e)||(t[e]=n[e])}function s(n){var t="function"==typeof Symbol&&n[Symbol.iterator],e=0;return t?t.call(n):{next:function(){return n&&e>=n.length&&(n=void 0),{value:n&&n[e++],done:!n}}}}function p(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var r,o,u=e.call(n),i=[];try{for(;(void 0===t||t-- >0)&&!(r=u.next()).done;)i.push(r.value)}catch(n){o={error:n}}finally{try{r&&!r.done&&(e=u.return)&&e.call(u)}finally{if(o)throw o.error}}return i}function y(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(p(arguments[t]));return n}function d(n){return this instanceof d?(this.v=n,this):new d(n)}function h(n,t,e){function r(n){l[n]&&(f[n]=function(t){return new Promise(function(e,r){s.push([n,t,e,r])>1||o(n,t)})})}function o(n,t){try{u(l[n](t))}catch(n){a(s[0][3],n)}}function u(n){n.value instanceof d?Promise.resolve(n.value.v).then(i,c):a(s[0][2],n)}function i(n){o("next",n)}function c(n){o("throw",n)}function a(n,t){n(t),s.shift(),s.length&&o(s[0][0],s[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var f,l=e.apply(n,t||[]),s=[];return f={},r("next"),r("throw"),r("return"),f[Symbol.asyncIterator]=function(){return this},f}function v(n){function t(t,o){n[t]&&(e[t]=function(e){return(r=!r)?{value:d(n[t](e)),done:"return"===t}:o?o(e):e})}var e,r;return e={},t("next"),t("throw",function(n){throw n}),t("return"),e[Symbol.iterator]=function(){return this},e}function b(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator];return t?t.call(n):"function"==typeof s?s(n):n[Symbol.iterator]()}function m(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}Object.defineProperty(t,"__esModule",{value:!0}),t.__extends=r,e.d(t,"__assign",function(){return g}),t.__rest=o,t.__decorate=u,t.__param=i,t.__metadata=c,t.__awaiter=a,t.__generator=f,t.__exportStar=l,t.__values=s,t.__read=p,t.__spread=y,t.__await=d,t.__asyncGenerator=h,t.__asyncDelegator=v,t.__asyncValues=b,t.__makeTemplateObject=m;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])},g=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n}},,function(n,t,e){"use strict";(function(n){function e(n,t){for(var e=Object.keys(t),r=e.length;r--;){var o=e[r];n[o]=t[o]}return n}function r(n,r){return e(e(t.isPojo(n)?{}:new n.constructor,n),r)}function o(n){return e(t.isPojo(n)?{}:new n.constructor,n)}function u(n,e,o){var i=t.isPojo(o)?{}:new o.constructor;return 0===n.length?e:(i[n[0]]=1<n.length?u(n.slice(1),e,o[n[0]]):e,r(o,i))}function i(n,t){for(var e=n.length,r=0;r<e;r++)t=t[n[r]];return t}function c(n){return"function"==typeof n}Object.defineProperty(t,"__esModule",{value:!0});var a=function(n){return void 0!==n&&null!==n};t.isPojo=function(n){return!a(n.constructor)||n.constructor===Object},t.isDev=void 0!==n&&!1,t.debug=function(n){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t.isDev&&console.log.apply(console,["[hydux-"+n+"]"].concat(e))},t.set=e,t.merge=r,t.clone=o,t.setDeep=u,t.get=i,t.isFn=c,t.noop=function(n){return n}}).call(t,e(3))},function(n,t){function e(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(n){if(l===setTimeout)return setTimeout(n,0);if((l===e||!l)&&setTimeout)return l=setTimeout,setTimeout(n,0);try{return l(n,0)}catch(t){try{return l.call(null,n,0)}catch(t){return l.call(this,n,0)}}}function u(n){if(s===clearTimeout)return clearTimeout(n);if((s===r||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(n);try{return s(n)}catch(t){try{return s.call(null,n)}catch(t){return s.call(this,n)}}}function i(){h&&y&&(h=!1,y.length?d=y.concat(d):v=-1,d.length&&c())}function c(){if(!h){var n=o(i);h=!0;for(var t=d.length;t;){for(y=d,d=[];++v<t;)y&&y[v].run();v=-1,t=d.length}y=null,h=!1,u(n)}}function a(n,t){this.fun=n,this.array=t}function f(){}var l,s,p=n.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:e}catch(n){l=e}try{s="function"==typeof clearTimeout?clearTimeout:r}catch(n){s=r}}();var y,d=[],h=!1,v=-1;p.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];d.push(new a(n,t)),1!==d.length||h||o(c)},a.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=f,p.addListener=f,p.once=f,p.off=f,p.removeListener=f,p.removeAllListeners=f,p.emit=f,p.prependListener=f,p.prependOnceListener=f,p.listeners=function(n){return[]},p.binding=function(n){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(n){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(n,t,e){"use strict";function r(n,t,e,r){if(!n)return[];u.isFn(t)&&(r=e,e=t,t=void 0);var o=function(){var r=n(t);return e&&e(r),r};return[function(n){if(!r)return o();try{return o()}catch(n){console.error(n),r(n)}}]}function o(n,t,e,r){return n?(u.isFn(t)&&(r=e,e=t,t=void 0),[function(o){return n(t).then(function(n){try{e&&e(n)}catch(n){console.error(n)}}).catch(r)}]):[]}Object.defineProperty(t,"__esModule",{value:!0});var u=e(2);t.ofFn=r,t.ofPromise=o,t.ofSub=function(n){return[n]};var i=Array.prototype.concat;t.batch=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return i.apply([],i.apply([],n))},t.map=function(n,t){return t.map(function(t){return function(e){return t(n(e))}})},t.none=[],t.Cmd={none:t.none,ofFn:r,ofPromise:o,ofSub:t.ofSub,batch:t.batch,map:t.map},t.default=t.Cmd},,,,,,,,,,function(n,t,e){"use strict";function r(n,t,e,r,o,u){var i=n;return l.isFn(i)&&(i=i(t,e,r,o))&&l.isFn(i)&&(i=i(e)),void 0===i||i.then&&l.isFn(i.then)?[t,f.default.none]:i instanceof Array?[i[0]||t,i[1]||f.default.none]:[i,f.default.none]}function o(n,t,e,o){return t?function(e,o,u,i){return t(function(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];return r(n.apply(void 0,t),e,o)},u,i,e,o)}:n}function u(n){return n instanceof Array?n:[n,f.default.none]}function i(n,t){return Promise.all(n.map(function(n){return n(t)}))}function c(n){function t(t){void 0===t&&(t=y),t!==y&&(y=t);var e=n.view(y,o);return l.isFn(e)&&(e=e(o)),s(e)}function e(u,c,a,s){for(var p in a)!function(p){if(/^_/.test(p))return"continue";var d=a[p];l.isFn(d)?c[p]=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];u=l.get(s,y);var h=[u,y],v=h[0],b=h[1],m=f.default.none,_=[void 0,void 0],g=_[0],w=_[1],j=d.apply(void 0,e);if(l.isFn(j)&&j.length>2){var O=s.slice(0,-1);w=l.get(O,o),g=l.get(O,y)}return P=r(j,u,c,g,w),v=P[0],m=P[1],n.onUpdate&&(b=l.setDeep(s,l.merge(u,v),y),n.onUpdate({prevAppState:y,nextAppState:b,msgData:d.length?e:[],action:s.concat(p).join(".")})),v!==u&&(y=b!==y?b:l.setDeep(s,l.merge(u,v),y),t(y)),i(m,c);var P}:"object"==typeof d&&d&&e(u[p]||(u[p]={}),c[p]=l.clone(d),d,s.concat(p))}(p)}var o={},c=n.subscribe||function(n){return f.default.none},s=n.onRender||l.noop,p=u(n.init()),y=p[0],d=p[1];return e(y,o,n.actions,[]),i(d,o),t(y),c(y).forEach(function(n){return n(o)}),a.__assign({get state(){return y}},n,{actions:o,render:t,patch:function(n,r,c){void 0===c&&(c=!1),c=c&&y[n];var a=u(r.init()),f=a[0],s=a[1],p=o[n];return p||(p=o[n]={},e(f,p,r.actions,[n])),c||(y=l.setDeep([n],f,y)),y=l.setDeep(["lazyComps",n],r,y),t(y),c?Promise.resolve():i(s,p)}})}Object.defineProperty(t,"__esModule",{value:!0});var a=e(0),f=e(4);t.Cmd=f.default;var l=e(2);t.isFn=l.isFn,t.noop=l.noop,t.isPojo=l.isPojo,a.__exportStar(e(15),t),t.runAction=r,t.withParents=o,t.wrapActions=o,t.normalizeInit=u,t.runCmd=i,t.app=c,t.default=c},function(n,t,e){"use strict";function r(n,t){return{tag:n,data:t}}function o(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(t){return n.reduce(function(n,t){return t(n)},t)}}Object.defineProperty(t,"__esModule",{value:!0});var u=e(4);t.dt=r,t.never=function(n){return n},t.mkInit=function(n,t){return void 0===t&&(t=u.none),function(){return[n,t]}},t.compose=o}])});
//# sourceMappingURL=hydux.core.js.map