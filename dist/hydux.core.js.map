{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///hydux.core.js","webpack:///webpack/bootstrap a7d41323648f7b582ded","webpack:///./src/utils.ts","webpack:///./src/index.ts","webpack:///./src/helpers.ts","webpack:///./src/cmd.ts"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","1","set","to","from","keys","length","key","merge","isPojo","constructor","clone","setDeep","path","value","slice","len","isFn","data","isSet","val","obj","noop","f","12","runAction","result","state","actions","parentState","parentActions","rst","utils_1","undefined","then","cmd_1","default","none","Array","withParents","action","wrapper","args","_i","arguments","apply","app","props","appRender","appState","view","appActions","render","init","test","subFrom","msgData","_a","nextState","nextAppState","cmd","_b","actionResult","pPath","_c","onUpdate","prevAppState","concat","join","forEach","sub","appSubscribe","subscribe","_","onRender","__assign","getState","assign","t","Cmd","wrapActions","13","dt","tag","never","mkInit","2","ofFn","task","succeedAction","failedAction","fn","e","console","error","ofPromise","res","catch","ofSub","_concat","batch","cmds","map"],"mappings":"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","file":"hydux.core.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"core\"] = factory();\n\telse\n\t\troot[\"hydux\"] = root[\"hydux\"] || {}, root[\"hydux\"][\"core\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"core\"] = factory();\n\telse\n\t\troot[\"hydux\"] = root[\"hydux\"] || {}, root[\"hydux\"][\"core\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 12);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 1:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar isSet = function (val) { return typeof val !== 'undefined' && val !== null; };\r\nexports.isPojo = function (obj) { return !isSet(obj.constructor) || obj.constructor === Object; };\r\nfunction set(to, from) {\r\n    var keys = Object.keys(from);\r\n    var i = keys.length;\r\n    while (i--) {\r\n        var key = keys[i];\r\n        to[key] = from[key];\r\n    }\r\n    return to;\r\n}\r\nexports.set = set;\r\nfunction merge(to, from) {\r\n    return set(set(exports.isPojo(to) ? {} : new to.constructor(), to), from);\r\n}\r\nexports.merge = merge;\r\nfunction clone(from) {\r\n    return set(exports.isPojo(from) ? {} : new from.constructor(), from);\r\n}\r\nexports.clone = clone;\r\nfunction setDeep(path, value, from) {\r\n    var to = exports.isPojo(from) ? {} : new from.constructor();\r\n    return 0 === path.length\r\n        ? value\r\n        : ((to[path[0]] =\r\n            1 < path.length\r\n                ? setDeep(path.slice(1), value, from[path[0]])\r\n                : value),\r\n            merge(from, to));\r\n}\r\nexports.setDeep = setDeep;\r\nfunction get(path, from) {\r\n    var len = path.length;\r\n    for (var i = 0; i < len; i++) {\r\n        from = from[path[i]];\r\n    }\r\n    return from;\r\n}\r\nexports.get = get;\r\nfunction isFn(data) {\r\n    return 'function' === typeof data;\r\n}\r\nexports.isFn = isFn;\r\nexports.noop = function (f) { return f; };\r\n\n\n/***/ }),\n\n/***/ 12:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar cmd_1 = __webpack_require__(2);\r\nexports.Cmd = cmd_1.default;\r\nvar utils_1 = __webpack_require__(1);\r\nexports.isFn = utils_1.isFn;\r\nexports.noop = utils_1.noop;\r\nexports.isPojo = utils_1.isPojo;\r\n__export(__webpack_require__(13));\r\n/**\r\n * run action and return a normalized result ([State, CmdType<>]),\r\n * this is useful to write High-Order-Action, which take an action and return a wrapped action.\r\n * @param result result of `action(msg: Data)`\r\n * @param state\r\n * @param actions\r\n */\r\nfunction runAction(result, state, actions, parentState, parentActions) {\r\n    var rst = result;\r\n    utils_1.isFn(rst) && (rst = rst(state, actions, parentState, parentActions)) &&\r\n        utils_1.isFn(rst) && (rst = rst(actions));\r\n    // action can be a function that return a promise or undefined(callback)\r\n    if (rst === undefined ||\r\n        (rst.then && utils_1.isFn(rst.then))) {\r\n        return [state, cmd_1.default.none];\r\n    }\r\n    if (rst instanceof Array) {\r\n        return [rst[0] || state, rst[1] || cmd_1.default.none];\r\n    }\r\n    return [rst, cmd_1.default.none];\r\n}\r\nexports.runAction = runAction;\r\n/**\r\n * Wrap a child action with parentState, parentActions.\r\n * @param action The action to be wrapped\r\n * @param wrapper\r\n * @param parentState\r\n * @param parentActions\r\n */\r\nfunction withParents(action, wrapper, parentState, parentActions) {\r\n    if (!wrapper) {\r\n        return action;\r\n    }\r\n    var wrapped = function (state, actions, parentState, parentActions) {\r\n        var nactions = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return runAction(action.apply(void 0, args), state, actions);\r\n        };\r\n        return wrapper(nactions, parentState, parentActions, state, actions);\r\n    };\r\n    return wrapped;\r\n}\r\nexports.withParents = withParents;\r\n/**\r\n * @deprecated Deprecated for `withParents`\r\n */\r\nexports.wrapActions = withParents;\r\nfunction app(props) {\r\n    // const appEvents = props.events || {}\r\n    var appActions = {};\r\n    var appSubscribe = props.subscribe || (function (_) { return cmd_1.default.none; });\r\n    var render = props.onRender || utils_1.noop;\r\n    // const appMiddlewares = props.middlewares || []\r\n    var _a = runAction(props.init(), void 0, appActions), appState = _a[0], cmd = _a[1];\r\n    init(appState, appActions, props.actions, []);\r\n    cmd.forEach(function (sub) { return sub(appActions); });\r\n    appRender(appState);\r\n    appSubscribe(appState).forEach(function (sub) { return sub(appActions); });\r\n    return __assign({}, props, { actions: appActions, get state() {\r\n            return appState;\r\n        },\r\n        getState: function () { return appState; }, render: appRender });\r\n    function appRender(state) {\r\n        if (state === void 0) { state = appState; }\r\n        if (state !== appState) {\r\n            appState = state;\r\n        }\r\n        var view;\r\n        if (utils_1.isFn(view = props.view(appState, appActions))) {\r\n            view = view(appActions);\r\n        }\r\n        return render(view);\r\n    }\r\n    function init(state, actions, from, path) {\r\n        var _loop_1 = function (key) {\r\n            if (/^_/.test(key)) {\r\n                return \"continue\";\r\n            }\r\n            var subFrom = from[key];\r\n            if (utils_1.isFn(subFrom)) {\r\n                actions[key] = function () {\r\n                    var msgData = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        msgData[_i] = arguments[_i];\r\n                    }\r\n                    state = utils_1.get(path, appState);\r\n                    // action = appMiddlewares.reduce((action, fn) => fn(action, key, path), action)\r\n                    var _a = [state, appState], nextState = _a[0], nextAppState = _a[1];\r\n                    var cmd = cmd_1.default.none;\r\n                    var _b = [undefined, undefined], parentState = _b[0], parentActions = _b[1];\r\n                    var actionResult = subFrom.apply(void 0, msgData);\r\n                    if (utils_1.isFn(actionResult) && actionResult.length > 2) {\r\n                        var pPath = path.slice(0, -1);\r\n                        parentActions = utils_1.get(pPath, appActions);\r\n                        parentState = utils_1.get(pPath, appState);\r\n                    }\r\n                    _c = runAction(actionResult, state, actions, parentState, parentActions), nextState = _c[0], cmd = _c[1];\r\n                    if (props.onUpdate) {\r\n                        nextAppState = utils_1.setDeep(path, utils_1.merge(state, nextState), appState);\r\n                        props.onUpdate({\r\n                            prevAppState: appState,\r\n                            nextAppState: nextAppState,\r\n                            msgData: msgData,\r\n                            action: path.concat(key).join('.')\r\n                        });\r\n                    }\r\n                    if (nextState !== state) {\r\n                        appState = nextAppState !== appState\r\n                            ? nextAppState\r\n                            : utils_1.setDeep(path, utils_1.merge(state, nextState), appState);\r\n                        appRender(appState);\r\n                    }\r\n                    cmd.forEach(function (sub) { return sub(actions); });\r\n                    var _c;\r\n                };\r\n            }\r\n            else if (typeof subFrom === 'object' && subFrom) {\r\n                init(state[key] || (state[key] = {}), (actions[key] = utils_1.clone(subFrom)), subFrom, path.concat(key));\r\n            }\r\n        };\r\n        for (var key in from) {\r\n            _loop_1(key);\r\n        }\r\n    }\r\n}\r\nexports.app = app;\r\nexports.default = app;\r\n\n\n/***/ }),\n\n/***/ 13:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Cmd = __webpack_require__(2);\r\nfunction dt(tag, data) {\r\n    return { tag: tag, data: data };\r\n}\r\nexports.dt = dt;\r\nexports.never = function (f) { return f; };\r\nexports.mkInit = function (state, cmd) {\r\n    if (cmd === void 0) { cmd = Cmd.none; }\r\n    return function () { return [state, cmd]; };\r\n};\r\n\n\n/***/ }),\n\n/***/ 2:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar utils_1 = __webpack_require__(1);\r\nfunction ofFn(task, args, succeedAction, failedAction) {\r\n    if (!task) {\r\n        return [];\r\n    }\r\n    if (utils_1.isFn(args)) {\r\n        failedAction = succeedAction;\r\n        succeedAction = args;\r\n        args = void 0;\r\n    }\r\n    var fn = function () {\r\n        var result = task(args);\r\n        if (succeedAction) {\r\n            succeedAction(result);\r\n        }\r\n        return result;\r\n    };\r\n    return [\r\n        function (_) {\r\n            if (failedAction) {\r\n                try {\r\n                    return fn();\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                    failedAction(e);\r\n                }\r\n            }\r\n            else {\r\n                return fn();\r\n            }\r\n        }\r\n    ];\r\n}\r\nexports.ofFn = ofFn;\r\nfunction ofPromise(task, args, succeedAction, failedAction) {\r\n    if (!task) {\r\n        return [];\r\n    }\r\n    if (utils_1.isFn(args)) {\r\n        failedAction = succeedAction;\r\n        succeedAction = args;\r\n        args = void 0;\r\n    }\r\n    return [\r\n        function (_) {\r\n            return task(args)\r\n                .then(function (res) {\r\n                try {\r\n                    succeedAction && succeedAction(res);\r\n                }\r\n                catch (error) {\r\n                    console.error(error);\r\n                }\r\n            })\r\n                .catch(failedAction);\r\n        }\r\n    ];\r\n}\r\nexports.ofPromise = ofPromise;\r\n/**\r\n * Create a command from a sub function, you can access all same level actions in a `sub`.\r\n * @param sub\r\n */\r\nexports.ofSub = function (sub) { return [sub]; };\r\nvar _concat = Array.prototype.concat;\r\n/**\r\n * Batch multi commands to one command\r\n * @param cmds\r\n */\r\nexports.batch = function () {\r\n    var cmds = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        cmds[_i] = arguments[_i];\r\n    }\r\n    return _concat.apply([], _concat.apply([], cmds));\r\n};\r\n/**\r\n * Map a command to a low level command\r\n * @param map\r\n * @param cmd\r\n */\r\nexports.map = function (map, cmd) {\r\n    return cmd.map(function (sub) { return function (actions) { return sub(map(actions)); }; });\r\n};\r\n/**\r\n * Empty command\r\n */\r\nexports.none = [];\r\nexports.Cmd = {\r\n    none: exports.none,\r\n    ofFn: ofFn,\r\n    ofPromise: ofPromise,\r\n    ofSub: exports.ofSub,\r\n    batch: exports.batch,\r\n    map: exports.map,\r\n};\r\nexports.default = exports.Cmd;\r\n\n\n/***/ })\n\n/******/ });\n});\n\n\n// WEBPACK FOOTER //\n// hydux.core.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a7d41323648f7b582ded","\nconst isSet = val => typeof val !== 'undefined' && val !== null\nexport const isPojo = obj => !isSet(obj.constructor) || obj.constructor === Object\n\nexport function set(to, from) {\n  const keys = Object.keys(from)\n  let i = keys.length\n  while (i--) {\n    const key = keys[i]\n    to[key] = from[key]\n  }\n  return to\n}\n\nexport function merge(to, from) {\n  return set(set(isPojo(to) ? {} : new to.constructor(), to), from)\n}\n\nexport function clone(from) {\n  return set(isPojo(from) ? {} : new from.constructor(), from)\n}\n\nexport function setDeep(path: string[], value, from) {\n  const to = isPojo(from) ? {} : new from.constructor()\n  return 0 === path.length\n    ? value\n    : ((to[path[0]] =\n        1 < path.length\n          ? setDeep(path.slice(1), value, from[path[0]])\n          : value),\n      merge(from, to))\n}\n\nexport function get(path: string[], from: any) {\n  let len = path.length\n  for (let i = 0; i < len; i++) {\n    from = from[path[i]]\n  }\n  return from\n}\n\nexport function isFn(data): data is Function {\n  return 'function' === typeof data\n}\n\nexport const noop = f => f\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.ts","import { ActionResult, ActionState, ActionCmdResult, ActionType, ActionsType, UnknownArgsActionType, NormalAction } from './types'\nimport Cmd, { CmdType, Sub } from './cmd'\nimport { set, merge, setDeep, get, isFn, noop, isPojo, clone } from './utils'\nexport * from './helpers'\nexport * from './types'\nexport { Cmd, CmdType, Sub, ActionResult, noop, isFn, isPojo }\n\nexport type Init<S, A> = () => S | [S, CmdType<A>]\nexport type View<S, A> = (state: S, actions: A) => any\nexport type Subscribe<S, A> = (state: S) => CmdType<A>\nexport type OnUpdate<S, A> = <M>(data: { prevAppState: S, nextAppState: S, msgData: M, action: string }) => void\nexport type OnUpdateStart<S, A> = <M>(data: { action: string }) => void\n\nexport interface AppProps<State, Actions> {\n  init: Init<State, Actions>,\n  view: View<State, Actions>\n  actions: ActionsType<State, Actions>,\n  subscribe?: Subscribe<State, Actions>,\n  // middlewares: ((action: MyAction<any, State, Actions>, key: string, path: string[]) => MyAction<any, State, Actions>)[],\n  onRender?: (view: any) => void,\n  onUpdate?: OnUpdate<State, Actions>,\n  onUpdateStart?: OnUpdateStart<State, Actions>,\n}\n/**\n * run action and return a normalized result ([State, CmdType<>]),\n * this is useful to write High-Order-Action, which take an action and return a wrapped action.\n * @param result result of `action(msg: Data)`\n * @param state\n * @param actions\n */\nexport function runAction<S, A, PS, PA>(\n  result: ActionResult<S, A> | ((state: S, actions: A) => ActionResult<S, A>),\n  state: S,\n  actions: A,\n  parentState?: PS,\n  parentActions?: PA,\n): ActionCmdResult<S, A> {\n  let rst: any = result\n  isFn(rst) && (rst = rst(state, actions, parentState, parentActions)) &&\n  isFn(rst) && (rst = rst(actions))\n  // action can be a function that return a promise or undefined(callback)\n  if (\n    rst === undefined ||\n    (rst.then && isFn(rst.then))\n  ) {\n    return [state, Cmd.none]\n  }\n  if (rst instanceof Array) {\n    return [rst[0] || state, rst[1] || Cmd.none]\n  }\n  return [rst, Cmd.none]\n}\n\nexport function withParents<S, A, PS, PA, A1>(\n  action: (a1: A1) => (s: S, a: A) => any,\n  wrapper?: (action: (a1: A1) => ActionCmdResult<S, A>, parentState: PS, parentActions: PA, state: S, actions: A) => ActionResult<S, A>,\n  parentState?: PS,\n  parentActions?: PA,\n)\nexport function withParents<S, A, PS, PA, A1, A2>(\n  action: (a1: A1, a2: A2) => (s: S, a: A) => any,\n  wrapper?: (action: (a1: A1, a2: A2) => ActionCmdResult<S, A>, parentState: PS, parentActions: PA, state: S, actions: A) => ActionResult<S, A>,\n  parentState?: PS,\n  parentActions?: PA,\n)\nexport function withParents<S, A, PS, PA, A1, A2, A3>(\n  action: (a1: A1, a2: A2, a3: A3) => (s: S, a: A) => any,\n  wrapper?: (action: (a1: A1, a2: A2, a3: A3) => ActionCmdResult<S, A>, parentState: PS, parentActions: PA, state: S, actions: A) => ActionResult<S, A>,\n  parentState?: PS,\n  parentActions?: PA,\n)\nexport function withParents<S, A, PS, PA, A1, A2, A3, A4>(\n  action: (a1: A1, a2: A2, a3: A3, a4: A4) => (s: S, a: A) => any,\n  wrapper?: (action: (a1: A1, a2: A2, a3: A3, a4: A4) => ActionCmdResult<S, A>, parentState: PS, parentActions: PA, state: S, actions: A) => ActionResult<S, A>,\n  parentState?: PS,\n  parentActions?: PA,\n)\nexport function withParents<S, A, PS, PA, A1, A2, A3, A4, A5>(\n  action: (a1: A1, a2: A2, a3: A3, a4: A4, a5: A5) => (s: S, a: A) => any,\n  wrapper?: (action: (a1: A1, a2: A2, a3: A3, a4: A4, a5: A5) => ActionCmdResult<S, A>, parentState: PS, parentActions: PA, state: S, actions: A) => ActionResult<S, A>,\n  parentState?: PS,\n  parentActions?: PA,\n)\n/**\n * Wrap a child action with parentState, parentActions.\n * @param action The action to be wrapped\n * @param wrapper\n * @param parentState\n * @param parentActions\n */\nexport function withParents<S, A, PS, PA>(\n  action: (UnknownArgsActionType<S, A>),\n  wrapper?: (action: NormalAction<any, S, A>, parentState: PS, parentActions: PA, state: S, actions: A) => ActionResult<S, A>,\n  parentState?: PS,\n  parentActions?: PA,\n): any {\n  if (!wrapper) {\n    return action\n  }\n  const wrapped = (state: S, actions: A, parentState: PS, parentActions: PA) => {\n    const nactions = (...args) => runAction(action(...args), state, actions)\n    return wrapper(nactions, parentState, parentActions, state, actions)\n  }\n  return wrapped\n}\n/**\n * @deprecated Deprecated for `withParents`\n */\nexport const wrapActions = withParents\n\nexport type App<State, Actions> = (props: AppProps<State, Actions>) => any\n\nexport function app<State, Actions>(props: AppProps<State, Actions>) {\n  // const appEvents = props.events || {}\n  const appActions = {} as Actions\n  const appSubscribe = props.subscribe || (_ => Cmd.none)\n  const render = props.onRender || noop\n  // const appMiddlewares = props.middlewares || []\n  let [appState, cmd] = runAction(props.init(), void 0 as any as State, appActions) as [State, CmdType<Actions>]\n  init(appState, appActions, props.actions, [])\n  cmd.forEach(sub => sub(appActions))\n  appRender(appState)\n  appSubscribe(appState).forEach(sub => sub(appActions))\n\n  return {\n    ...props,\n    actions: appActions,\n    get state() {\n      return appState\n    },\n    getState() { return appState },\n    render: appRender,\n  }\n\n  function appRender(state = appState) {\n    if (state !== appState) {\n      appState = state\n    }\n    let view\n    if (isFn(view = props.view(appState, appActions))) {\n      view = view(appActions)\n    }\n    return render(view)\n  }\n\n  function init(state, actions, from: ActionsType<State, Actions> | ActionType<any, State, Actions>, path: string[]) {\n    for (const key in from) {\n      if (/^_/.test(key)) {\n        continue\n      }\n      const subFrom = from[key]\n      if (isFn(subFrom)) {\n        actions[key] = function(...msgData) {\n          state = get(path, appState)\n          // action = appMiddlewares.reduce((action, fn) => fn(action, key, path), action)\n          let [nextState, nextAppState] = [state, appState]\n          let cmd = Cmd.none\n          let [parentState, parentActions] = [undefined, undefined]\n          const actionResult = subFrom(...msgData)\n          if (isFn(actionResult) && actionResult.length > 2) {\n            const pPath = path.slice(0, -1)\n            parentActions = get(pPath, appActions)\n            parentState = get(pPath, appState)\n          }\n          [nextState, cmd] = runAction(\n            actionResult,\n            state,\n            actions,\n            parentState,\n            parentActions\n          )\n\n          if (props.onUpdate) {\n            nextAppState = setDeep(path, merge(state, nextState), appState)\n            props.onUpdate({\n              prevAppState: appState,\n              nextAppState,\n              msgData,\n              action: path.concat(key).join('.')\n            })\n          }\n\n          if (nextState !== state) {\n            appState = nextAppState !== appState\n              ? nextAppState\n              : setDeep(path, merge(state, nextState), appState)\n            appRender(appState)\n          }\n          cmd.forEach(sub => sub(actions))\n        }\n      } else if (typeof subFrom === 'object' && subFrom) {\n        init(\n          state[key] || (state[key] = {}),\n          (actions[key] = clone(subFrom)),\n          subFrom,\n          path.concat(key)\n        )\n      }\n    }\n  }\n}\n\nexport default app\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import * as Cmd from './cmd'\nimport { ActionCmdResult } from './index'\n\ndeclare global {\n  type Dt<T extends string, D = undefined> = {\n    tag: T,\n    data: D\n  } & { __tsTag: 'DateType' }\n}\n\nexport function dt<T extends string, D = undefined>(tag: T, data?: D) {\n  return { tag, data } as Dt<T, D>\n}\n\nexport const never = (f: never) => f\n\nexport const mkInit = <S, A>(state: S, cmd: Cmd.CmdType<A> = Cmd.none): () => ActionCmdResult<S, A> => () => [state, cmd]\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers.ts","import { ActionResult, ActionType, ActionsType } from './types'\nimport { isFn } from './utils'\nexport interface Sub<Actions> {\n  (actions: Actions): any\n}\nexport type CmdType<Actions> = Sub<Actions>[]\n/**\n * Create command from a function has side effects.\n * @param task A function has one or zero paramter.\n * @param args Optional, the parameter of the funciton\n * @param succeedAction An action that would executed after the function executed.\n * @param failedAction An action that would executed after the function throw an error.\n */\nexport function ofFn<A, T, State, Actions>(\n  task: (args: A) => T,\n  args: A,\n  succeedAction?: ActionType<T, State, Actions>,\n  failedAction?: ActionType<Error, State, Actions>\n): CmdType<Actions>\n\nexport function ofFn<A, T, State, Actions>(\n  task?: () => T,\n  succeedAction?: ActionType<T, State, Actions>,\n  failedAction?: ActionType<Error, State, Actions>\n): CmdType<Actions>\n\nexport function ofFn<A, T, State, Actions>(\n  task?: (args?: A) => T,\n  args?: A,\n  succeedAction?: ActionType<T, State, Actions>,\n  failedAction?: ActionType<Error, State, Actions>\n): CmdType<Actions> {\n  if (!task) {\n    return [] as CmdType<Actions>\n  }\n  if (isFn(args)) {\n    failedAction = succeedAction as any\n    succeedAction = args as any\n    args = void 0\n  }\n  const fn = () => {\n    const result = task(args)\n    if (succeedAction) {\n      succeedAction(result)\n    }\n    return result\n  }\n  return [\n    _ => {\n      if (failedAction) {\n        try {\n          return fn()\n        } catch (e) {\n          console.error(e)\n          failedAction(e)\n        }\n      } else { // don't wrap in try cache, get better DX in `Pause on exceptions`\n        return fn()\n      }\n    }\n  ]\n}\n/**\n * Create a command from promise\n * @param task A function that take one or zero parameter and return a promise.\n * @param args Optional, the paramter of task\n * @param succeedAction An action would execute when the promise fulfilled.\n * @param failedAction An action would execute when the promise rejected.\n */\nexport function ofPromise<A, T, State, Actions>(\n  task: (arg: A) => Promise<T>,\n  args: A,\n  succeedAction?: ActionType<T, State, Actions>,\n  failedAction?: ActionType<Error, State, Actions>\n): CmdType<Actions>\n\nexport function ofPromise<A, T, State, Actions>(\n  task: () => Promise<T>,\n  succeedAction?: ActionType<T, State, Actions>,\n  failedAction?: ActionType<Error, State, Actions>\n): CmdType<Actions>\n\nexport function ofPromise<A, T, State, Actions>(\n  task: (args?: A) => Promise<T>,\n  args?: A,\n  succeedAction?: ActionType<T, State, Actions>,\n  failedAction?: ActionType<Error, State, Actions>\n): CmdType<Actions> {\n  if (!task) {\n    return [] as CmdType<Actions>\n  }\n  if (isFn(args)) {\n    failedAction = succeedAction as any\n    succeedAction = args as any\n    args = void 0\n  }\n  return [\n    _ =>\n      task(args)\n        .then(res => {\n          try {\n            succeedAction && succeedAction(res)\n          } catch (error) {\n            console.error(error)\n          }\n        })\n        .catch(failedAction)\n  ]\n}\n/**\n * Create a command from a sub function, you can access all same level actions in a `sub`.\n * @param sub\n */\nexport const ofSub = <Actions>(sub: Sub<Actions>): CmdType<Actions> => [sub]\nconst _concat = Array.prototype.concat\n/**\n * Batch multi commands to one command\n * @param cmds\n */\nexport const batch = <Actions>(\n  ...cmds: (CmdType<any> | CmdType<any>[])[]\n): CmdType<Actions> =>\n  _concat.apply([], _concat.apply([], cmds))\n/**\n * Map a command to a low level command\n * @param map\n * @param cmd\n */\nexport const map = <Actions, SubActions>(\n  map: (action: Actions) => SubActions, cmd: CmdType<SubActions>\n): CmdType<Actions> =>\n  cmd.map(sub => actions => sub(map(actions)))\n/**\n * Empty command\n */\nexport const none = ([] as Array<Sub<any>>)\n\nexport const Cmd = {\n  none,\n  ofFn,\n  ofPromise,\n  ofSub,\n  batch,\n  map,\n}\n\nexport default Cmd\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd.ts"],"sourceRoot":""}